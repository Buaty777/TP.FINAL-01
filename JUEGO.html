<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 1;
        }

        .menu-sonido {
            display: none;
            position: absolute;
            top: 10px;
            right: 10px;
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 5px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 30px;
            height: 30px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #calculadora {
            position: absolute;
            top: 50px;
            left: 20px;
            width: 100px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 5px;
            border-radius: 10px;
            display: none;
            font-size: 10px;
            border: 4px solid white;
        }

        #calculadora input {
            width: 100%;
            padding: 5px;
            margin-bottom: 5px;
            font-size: 12px;
            text-align: right;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
        }

        #calculadora button {
            width: 25%;
            padding: 5px;
            margin: 3px;
            font-size: 12px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 3px solid white;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        #calculadora button:hover {
            background-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        #resultado {
            width: 100%;
            padding: 5px;
            font-size: 12px;
            text-align: right;
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            border: 3px solid white;
        }

        #npc {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) scale(0);
            transition: transform 1s ease-out;
            opacity: 0;
            transition: opacity 1s ease-out;
        }

        .mostrar-npc {
            transform: translateX(-50%) scale(1);
            opacity: 1;
        }

        #menu-superior {
            position: absolute;
            top: 10px;
            right: 10px;
        }

        #menu-superior .boton {
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo">
            Luego de unos instantes, el abogado (Max) te explicó lo básico. En la parte superior izquierda tienes dos botones, uno te abre una lista la cual tiene los precios de las cosas y el otro una calculadora, arréglate con eso.
        </p>
    </div>

    <div class="menu-sonido" id="menu-sonido">
        <p>Menú de Sonido</p>
        <input type="range" min="0" max="100" value="50" id="control-volumen" oninput="cambiarVolumen(this.value)">
        <div>
            <button class="boton" id="boton-play" onclick="activarPlay()">
                <img src="inicio.png" alt="Iniciar Música">
            </button>
            <button class="boton" id="boton-pausa" onclick="activarPausa()">
                <img src="stop.png" alt="Parar Música">
            </button>
        </div>
        <button id="boton-salir" onclick="window.location.href='index.html'" class="boton">
            <img src="salir.png" alt="Salir">
        </button>
    </div>

    <div id="npc">
        <img src="npc1.png" alt="NPC" width="100">
    </div>

    <div id="menu-superior">
        <button id="boton-calculadora" class="boton" onclick="toggleCalculadora()">
            <img src="calculadora.png" alt="Calculadora">
        </button>
        <button id="boton-precios" class="boton" onclick="togglePrecios()">
            <img src="nota.png" alt="Precios">
        </button>
        <button id="boton-panel-sonido" class="boton" onclick="togglePanelSonido()">
            <img src="stop.png" alt="Panel de Sonido">
        </button>
    </div>

    <div id="calculadora">
        <input type="text" id="resultado" readonly>
        <button onclick="agregarNumero(7)">7</button>
        <button onclick="agregarNumero(8)">8</button>
        <button onclick="agregarNumero(9)">9</button><br>
        <button onclick="agregarNumero(4)">4</button>
        <button onclick="agregarNumero(5)">5</button>
        <button onclick="agregarNumero(6)">6</button><br>
        <button onclick="agregarNumero(1)">1</button>
        <button onclick="agregarNumero(2)">2</button>
        <button onclick="agregarNumero(3)">3</button><br>
        <button onclick="agregarNumero(0)">0</button>
        <button onclick="limpiar()">C</button>
        <button onclick="calcular()">=</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <script>
        const synth = new Tone.Synth().toDestination();
        const melody = new Tone.Sequence(
            (time, note) => {
                synth.triggerAttackRelease(note, '8n', time);
            },
            ['C4', 'E4', 'G4', 'B4', 'C5'],
            '4n'
        );

        Tone.Transport.start();
        melody.start();

        function cambiarVolumen(volumen) {
            Tone.Transport.volume.value = volumen - 100;
        }

        function activarPlay() {
            Tone.Transport.start();
        }

        function activarPausa() {
            Tone.Transport.pause();
        }

        function toggleCalculadora() {
            const calculadora = document.getElementById('calculadora');
            calculadora.style.display = (calculadora.style.display === 'block') ? 'none' : 'block';
        }

        function togglePrecios() {
            const listaPrecios = document.getElementById('lista-precios');
            listaPrecios.style.display = (listaPrecios.style.display === 'block') ? 'none' : 'block';
        }

        function togglePanelSonido() {
            const menuSonido = document.getElementById('menu-sonido');
            menuSonido.style.display = (menuSonido.style.display === 'block') ? 'none' : 'block';
        }

        function agregarNumero(numero) {
            const resultadoInput = document.getElementById('resultado');
            resultadoInput.value += numero;
        }

        function limpiar() {
            const resultadoInput = document.getElementById('resultado');
            resultadoInput.value = '';
        }

        function calcular() {
            const resultadoInput = document.getElementById('resultado');
            try {
                resultadoInput.value = eval(resultadoInput.value);
            } catch {
                resultadoInput.value = 'Error';
            }
        }

        
        window.onload = function() {
            const npc = document.getElementById('npc');
            npc.classList.add('mostrar-npc');
        };
    </script>
</body>
</html>
