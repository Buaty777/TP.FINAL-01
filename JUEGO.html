<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="LOGO 1.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        #npc1, #npc2 {
            position: absolute;
            bottom: 20px;
            right: 10%;
            width: 200px;
            display: block;
            transition: transform 0.5s ease, opacity 0.5s ease;
            opacity: 1;
            animation: npcAnimation 1.5s infinite alternate ease-in-out;
        }

        @keyframes npcAnimation {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 1;
        }

        .menu-sonido {
            display: block;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 40px;
            height: 40px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #pantalla-negra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-size: 24px;
            color: white;
        }

        #total {
            margin-top: 20px;
            font-size: 24px;
            background-color: rgba(255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
            color: white;
        }

        #calculo {
            margin-top: 20px;
            width: 30%;
            padding: 5px;
            font-size: 18px;
        }

        #boton-enviar {
            margin-top: 10px;
            padding: 10px 20px;
        }

        .boton-menu {
            position: absolute;
            top: 10px;
            left: 10px;
        }

        #boton-calculadora, #boton-precios {
            margin: 5px;
        }

        #calculadora {
            display: none;
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            z-index: 10;
        }

        .boton-calculo {
            width: 40px;
            height: 40px;
            font-size: 20px;
            margin: 5px;
        }

        #resultado-calculadora {
            margin-bottom: 10px;
            font-size: 24px;
        }

        #hoja-precios {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.9);
            border: 2px solid white;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            z-index: 10;
        }

        #hoja-precios p {
            margin: 0;
            font-size: 18px;
            color: white;
        }

        .boton-cerrar {
            margin-top: 10px;
            padding: 5px 10px;
            background-color: transparent;
            color: white;
            border: 1px solid white;
            cursor: pointer;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="pantalla-negra">Cargando...</div>
    <img src="npc1.png" alt="NPC 1" id="npc1">
    <img src="npc2.png" alt="NPC 2" id="npc2">

    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo"></p>
    </div>

    <div id="total">Total: 0</div>
    <input type="number" id="calculo" placeholder="Ingresa tu cálculo aquí" min="0">
    <button class="boton" id="boton-enviar" onclick="verificarPago()">Enviar</button>

    <div class="boton-menu">
        <button class="boton" id="boton-calculadora" onclick="toggleCalculadora()">
            <img src="calculadora.png" alt="Calculadora">
        </button>
        <button class="boton" id="boton-precios" onclick="abrirPrecios()">
            <img src="nota.png" alt="Precios">
        </button>
    </div>

    <div id="calculadora">
        <div id="resultado-calculadora">0</div>
        <button class="boton-calculo" onclick="agregarNumero(1)">1</button>
        <button class="boton-calculo" onclick="agregarNumero(2)">2</button>
        <button class="boton-calculo" onclick="agregarNumero(3)">3</button>
        <button class="boton-calculo" onclick="agregarNumero(4)">4</button>
        <button class="boton-calculo" onclick="agregarNumero(5)">5</button>
        <br>
        <button class="boton-calculo" onclick="realizarOperacion('+')">+</button>
        <button class="boton-calculo" onclick="realizarOperacion('-')">-</button>
        <button class="boton-calculo" onclick="limpiarCalculadora()">C</button>
        <button class="boton-calculo" onclick="finalizarOperacion()">=</button>
    </div>

    <div id="hoja-precios">
        <p>Jabón = 900</p>
        <p>Chetos = 1700</p>
        <p>Refresco = 800</p>
        <p>Queso = 1200</p>
        <p>Uranio = 11.000</p>
        <button class="boton-cerrar" onclick="cerrarPrecios()">Cerrar</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <script>
        let indiceDialogo = 0;
        const dialogos = [
            `Luego de unos instantes, el abogado (Max) te explicó lo básico. En la parte superior izquierda tienes dos botones, uno te abre una lista la cuál tiene los precios de las cosas y el otro una calculadora, arreglate con eso.`
        ];

        function mostrarDialogo() {
            if (indiceDialogo < dialogos.length) {
                const dialogoElemento = document.getElementById('texto-dialogo');
                dialogoElemento.classList.add('texto-visible');
                dialogoElemento.textContent = dialogos[indiceDialogo];
                indiceDialogo++;
                setTimeout(() => {
                    dialogoElemento.classList.remove('texto-visible');
                    setTimeout(mostrarNPC1, 500);
                }, 3000);
            }
        }

        function mostrarNPC1() {
            const npc1 = document.getElementById('npc1');
            npc1.style.display = 'block';
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Ay Holis!!!! Me dices cuanto sería el jabón y dos refrescos tres chetos y un queso plis?";
        }

        function mostrarNPC2() {
            const npc1 = document.getElementById('npc1');
            npc1.style.display = 'none';
            const npc2 = document.getElementById('npc2');
            npc2.style.display = 'block';
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Dame siete quesos...";
        }

        function abrirCalculadora() {
            const calculadora = document.getElementById('calculadora');
            calculadora.style.display = 'block';
        }

        function abrirPrecios() {
            const hojaPrecios = document.getElementById('hoja-precios');
            hojaPrecios.style.display = 'block';
        }

        function cerrarPrecios() {
            const hojaPrecios = document.getElementById('hoja-precios');
            hojaPrecios.style.display = 'none';
        }

        let operacionActual = '';
        let resultadoActual = 0;

        function agregarNumero(numero) {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            if (resultadoElemento.textContent === '0') {
                resultadoElemento.textContent = numero;
            } else {
                resultadoElemento.textContent += numero;
            }
        }

        function realizarOperacion(operacion) {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            resultadoActual = parseInt(resultadoElemento.textContent);
            operacionActual = operacion;
            resultadoElemento.textContent = '0';
        }

        function limpiarCalculadora() {
            document.getElementById('resultado-calculadora').textContent = '0';
            operacionActual = '';
            resultadoActual = 0;
        }

        function finalizarOperacion() {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            const segundoNumero = parseInt(resultadoElemento.textContent);

            if (operacionActual === '+') {
                resultadoActual += segundoNumero;
            } else if (operacionActual === '-') {
                resultadoActual -= segundoNumero;
            }

            resultadoElemento.textContent = resultadoActual;
        }

        function toggleCalculadora() {
            const calculadora = document.getElementById('calculadora');
            if (calculadora.style.display === 'none' || calculadora.style.display === '') {
                calculadora.style.display = 'block';
            } else {
                calculadora.style.display = 'none';
            }
        }

        function verificarPago() {
            const totalElemento = document.getElementById('total');
            const calculo = parseInt(document.getElementById('calculo').value);
            if (calculo === 900 + (2 * 800) + (3 * 1700) + 1200) {
                totalElemento.textContent = "Total: " + calculo;
                totalElemento.style.color = "green";
                setTimeout(() => {
                    mostrarNPC2();
                }, 3000);
            } else {
                totalElemento.textContent = "Total: " + calculo;
                totalElemento.style.color = "red";
            }
        }

        window.onload = function() {
            setTimeout(() => {
                document.getElementById('pantalla-negra').style.display = 'none';
                mostrarDialogo();
            }, 8000);
        };
    </script>
</body>
</html>
