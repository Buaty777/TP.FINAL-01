<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        #npc {
            position: absolute;
            bottom: 20px;
            left: 50px;
            width: 300px;
            display: block;
            animation: npcAnimation 1.5s infinite alternate ease-in-out;
        }

        @keyframes npcAnimation {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            display: block;
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 1;
        }

        .menu-sonido {
            display: none;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 40px;
            height: 40px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #pantalla-negra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #pantalla-negra h1 {
            color: white;
            font-size: 24px;
        }

        #calculadora {
            position: absolute;
            top: 50px;
            left: 20px;
            width: 120px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 10px;
            display: none;
            font-size: 10px;
        }

        #pantalla {
            width: 100%;
            padding: 5px;
            font-size: 12px;
            text-align: right;
            color: black;
            background-color: white;
            border: 3px solid white;
            margin-bottom: 5px;
        }

        #calculadora button {
            width: 25%;
            padding: 5px;
            margin: 3px;
            font-size: 12px;
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 3px solid white;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }

        #calculadora button:hover {
            background-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        #lista-precios {
            position: absolute;
            top: 80px;
            left: 20px;
            width: 150px;
            background-color: black;
            padding: 10px;
            border-radius: 10px;
            display: none;
            font-size: 12px;
            color: white;
            font-family: 'Courier New', Courier, monospace;
        }

        #menu-superior {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: row;
            align-items: center;
        }

        #boton-salir img {
            width: 40px;
            height: 40px;
        }
    </style>
</head>
<body>
    <div id="pantalla-negra">
        <h1>Cargando...</h1>
    </div>

    <img src="npc1.png" alt="NPC" id="npc">

    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo">Luego de unos instantes, el abogado (Max) te explicó lo básico, en la parte superior izquierda tienes dos botones, uno te abre una lista la cual tiene los precios de las cosas y el otro una calculadora, arréglate con eso.</p>
        <button id="boton-enviar" class="boton">Enviar</button>
    </div>

    <div class="menu-sonido" id="menu-sonido">
        <p>Menú de Sonido</p>
        <input type="range" min="0" max="100" value="50" id="control-volumen" oninput="cambiarVolumen(this.value)">
        <div>
            <button class="boton" id="boton-play" onclick="activarPlay()">
                <img src="inicio.png" alt="Iniciar Música">
            </button>
            <button class="boton" id="boton-pausa" onclick="activarPausa()">
                <img src="pausa.png" alt="Pausar Música">
            </button>
        </div>
        <button id="boton-salir" onclick="window.location.href='index.html'">
            <img src="salir.png" alt="Salir">
        </button>
    </div>

    <div id="calculadora">
        <input type="text" id="pantalla" disabled>
        <div>
            <button onclick="agregarNumero(1)">1</button>
            <button onclick="agregarNumero(2)">2</button>
            <button onclick="agregarNumero(3)">3</button>
        </div>
        <div>
            <button onclick="agregarNumero(4)">4</button>
            <button onclick="agregarNumero(5)">5</button>
            <button onclick="agregarNumero(0)">0</button>
        </div>
        <div>
            <button onclick="sumar()">+</button>
            <button onclick="restar()">-</button>
        </div>
        <div>
            <button onclick="calcular()">=</button>
        </div>
    </div>

    <div id="lista-precios">
        <p><strong>Precios</strong></p>
        <p>Jabón: 900</p>
        <p>Chetos: 1700</p>
        <p>Refresco: 800</p>
        <p>Queso: 1200</p>
        <p>Uranio: 11000</p>
    </div>

    <div id="menu-superior">
        <button id="boton-calculadora" class="boton" onclick="toggleCalculadora()">
            <img src="calculadora.png" alt="Calculadora">
        </button>
        <button id="boton-precios" class="boton" onclick="toggleListaPrecios()">
            <img src="nota.png" alt="Lista de Precios">
        </button>
    </div>

    <div id="dialogo-npc" class="panel-dialogo" style="display: none;">
        <img src="npc1.png" alt="NPC" id="npc" style="width: 100px;">
        <p id="texto-npc"></p>
        <input type="text" id="resultado-npc" placeholder="Escribe tu respuesta...">
        <button onclick="verificarRespuesta()">Enviar</button>
    </div>

    <audio id="musica" src="tu-musica.mp3" loop></audio>

    <script>
        function toggleCalculadora() {
            const calculadora = document.getElementById('calculadora');
            calculadora.style.display = calculadora.style.display === 'block' ? 'none' : 'block';
        }

        function toggleListaPrecios() {
            const listaPrecios = document.getElementById('lista-precios');
            listaPrecios.style.display = listaPrecios.style.display === 'block' ? 'none' : 'block';
        }

        function agregarNumero(numero) {
            const pantalla = document.getElementById('pantalla');
            pantalla.value += numero;
        }

        function sumar() {
            const pantalla = document.getElementById('pantalla');
            pantalla.value += '+';
        }

        function restar() {
            const pantalla = document.getElementById('pantalla');
            pantalla.value += '-';
        }

        function calcular() {
            const pantalla = document.getElementById('pantalla');
            pantalla.value = eval(pantalla.value);
        }

        let npc1Dialogo = ["Ay Holis!!!! Me dices cuánto sería el jabón y dos refrescos, tres chetos y un queso plis?"];
        let npc2Dialogo = ["Dame siete quesos..."];
        let respuestaCorrecta;

        function verificarRespuesta() {
            const resultadoNPC = parseInt(document.getElementById('resultado-npc').value);
            const textoNpc = document.getElementById('texto-npc');
            if (resultadoNPC === respuestaCorrecta) {
                textoNpc.textContent = "¡Ayyy muchas gracias!!!";
            } else if (resultadoNPC > respuestaCorrecta) {
                textoNpc.textContent = "¡Oye! Esto es una estafa...";
            } else {
                textoNpc.textContent = "¡Oh! Una ganga!!!";
            }
            document.getElementById('dialogo-npc').style.display = 'none';
            setTimeout(() => {
                mostrarNPC2();
            }, 2000);
        }

        function mostrarNPC2() {
            const textoNpc = document.getElementById('texto-npc');
            respuestaCorrecta = 7 * 1200;
            textoNpc.textContent = npc2Dialogo[0];
            document.getElementById('dialogo-npc').style.display = 'block';
        }

        function cambiarVolumen(volumen) {
            const musica = document.getElementById('musica');
            musica.volume = volumen / 100;
        }

        setTimeout(() => {
            document.getElementById('pantalla-negra').style.display = 'none';
            document.getElementById('panel-dialogo').style.display = 'none';
            respuestaCorrecta = 900 + (2 * 800) + (3 * 1700) + 1200;
            document.getElementById('dialogo-npc').style.display = 'block';
        }, 4000);
    </script>
</body>
</html>
