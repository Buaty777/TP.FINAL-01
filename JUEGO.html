<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego</title>
    <style>
        body {
            background-image: url('tienda.jpg');
            background-size: cover;
            font-family: 'Press Start 2P', cursive;
        }

        #panel-sonidos {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: space-around;
            width: 300px;
        }

        #panel-sonidos img {
            width: 40px;
            height: 40px;
        }

        #resultado {
            position: relative;
            top: 10px;
            background-color: black;
            color: white;
            padding: 10px;
            font-size: 1.2em;
            border-radius: 10px;
            width: 100px;
            margin: 20px auto;
        }

        .button {
            width: 100px;
            height: 100px;
            margin: 10px;
        }

        #calculadora {
            width: 200px;
            height: 200px;
            background-color: black;
            color: green;
            display: none;
        }

        #precios {
            display: none;
            background-color: #2d2d2d;
            padding: 10px;
            border-radius: 5px;
            width: 200px;
            font-size: 14px;
            font-family: monospace;
            color: white;
        }

        #npc {
            width: 150px;
            position: relative;
        }

        #boton-salir {
            position: absolute;
            top: 10px;
            right: 10px;
        }

    </style>
</head>
<body>

    <div id="panel-sonidos">
        <button id="boton-salir"><img src="salir.png" alt="Salir"></button>
        <button id="play-sound">Play</button>
        <button id="pause-sound">Pause</button>
    </div>

    <div id="resultado">
        <input type="text" id="total" placeholder="Total" />
        <button id="enviar">Enviar</button>
    </div>

    <div>
        <button class="button" id="boton-calculadora"><img src="calculadora.png" alt="Calculadora"></button>
        <button class="button" id="boton-precios"><img src="nota.png" alt="Precios"></button>
    </div>

    <div id="calculadora">
        <input type="text" id="pantalla" disabled />
        <div>
            <button>1</button>
            <button>2</button>
            <button>3</button>
            <button>4</button>
            <button>5</button>
        </div>
        <div>
            <button>+</button>
            <button>-</button>
            <button>=</button>
        </div>
    </div>

    <div id="precios">
        <p>Jabón: 900</p>
        <p>Chetos: 1700</p>
        <p>Refresco: 800</p>
        <p>Queso: 1200</p>
        <p>Uranio: 11000</p>
    </div>

    <img id="npc" src="npc1.png" alt="NPC 1" style="display:none;">
    <img id="npc2" src="npc2.png" alt="NPC 2" style="display:none;">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.26/Tone.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const playButton = document.getElementById('play-sound');
            const pauseButton = document.getElementById('pause-sound');
            const exitButton = document.getElementById('boton-salir');
            const synth = new Tone.Synth().toDestination();
            let melody = null;

            playButton.addEventListener('click', () => {
                melody = new Tone.Sequence((time, note) => {
                    synth.triggerAttackRelease(note, 0.5, time);
                }, ['C4', 'E4', 'G4', 'B4', 'C5'], '4n').start(0);
                Tone.Transport.start();
            });

            pauseButton.addEventListener('click', () => {
                Tone.Transport.pause();
            });

            exitButton.addEventListener('click', () => {
                window.location.href = 'index.html';
            });

            const calculadora = document.getElementById('calculadora');
            const botonCalculadora = document.getElementById('boton-calculadora');
            const pantalla = document.getElementById('pantalla');
            let operacion = '';

            botonCalculadora.addEventListener('click', () => {
                calculadora.style.display = calculadora.style.display === 'none' ? 'block' : 'none';
            });

            calculadora.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const valor = e.target.textContent;

                    if (valor === '=') {
                        pantalla.value = eval(operacion);
                    } else {
                        operacion += valor;
                        pantalla.value = operacion;
                    }
                }
            });

            const precios = document.getElementById('precios');
            const botonPrecios = document.getElementById('boton-precios');

            botonPrecios.addEventListener('click', () => {
                precios.style.display = precios.style.display === 'none' ? 'block' : 'none';
            });

            const npc1 = document.getElementById('npc');
            const npc2 = document.getElementById('npc2');
            const enviar = document.getElementById('enviar');
            const total = document.getElementById('total');

            let npcActual = 1;
            let precioCorrectoNpc1 = 6000;

            setTimeout(() => {
                npc1.style.display = 'block';
            }, 3000);

            enviar.addEventListener('click', () => {
                const valorIngresado = parseInt(total.value);

                if (npcActual === 1) {
                    if (valorIngresado === precioCorrectoNpc1) {
                        alert('NPC1: ¡Gracias!');
                        npc1.style.display = 'none';
                        setTimeout(() => npc2.style.display = 'block', 7000);
                        npcActual = 2;
                    } else if (valorIngresado > precioCorrectoNpc1) {
                        alert('NPC1: ¡Esto es una estafa!');
                    } else {
                        alert('NPC1: ¡Qué ganga!');
                    }
                }
            });
        });
    </script>

</body>
</html>
