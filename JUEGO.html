<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="LOGO 1.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        #abogado, #npc1, #npc2 {
            position: absolute;
            bottom: 20px;
            right: 10%;
            width: 200px;
            display: none;
            transition: transform 0.5s ease, opacity 0.5s ease;
            opacity: 0;
            animation: npcAnimation 1.5s infinite alternate ease-in-out;
        }

        @keyframes npcAnimation {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            display: block;
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .texto-visible {
            opacity: 1;
        }

        .menu-sonido {
            display: none;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 40px;
            height: 40px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #boton-saltar {
            position: absolute;
            bottom: 10px;
            left: 10px;
            padding: 10px 20px;
        }

        #boton-detener {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
        }

        #pantalla-negra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: none;
            z-index: 9999;
        }

        #resultado {
            margin-top: 20px;
            font-size: 24px;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 10px;
        }

        #calculo {
            margin-top: 20px;
            width: 50%;
            padding: 10px;
            font-size: 18px;
        }

        #boton-pagar {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="pantalla-negra"></div>
    <img src="abogado.png" alt="Abogado" id="abogado">
    <img src="npc1.png" alt="NPC 1" id="npc1">
    <img src="npc2.png" alt="NPC 2" id="npc2">

    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo"></p>
    </div>

    <div class="menu-sonido" id="menu-sonido">
        <p>Menú de Sonido</p>
        <input type="range" min="0" max="100" value="50" class="barra-volumen" id="control-volumen" oninput="cambiarVolumen(this.value)">
        <input type="range" min="0" max="100" value="50" class="barra-volumen" id="control-volumen-efectos" oninput="cambiarVolumenEfectos(this.value)">
        <div>
            <button class="boton" onclick="irAIndex()">
                <img src="salir.png" alt="Salir">
            </button>
            <button class="boton" id="boton-play" onclick="activarPlay()">
                <img src="inicio.png" alt="Iniciar Música">
            </button>
            <button class="boton" id="boton-pausa" onclick="activarPausa()">
                <img src="pausa.png" alt="Pausar Música">
            </button>
        </div>
    </div>

    <button class="boton" id="boton-saltar" onclick="saltarCinematica()">
        <img src="pass.png" alt="Saltar Cinemática">
    </button>

    <button class="boton" id="boton-detener" onclick="activarMenuSonido()">
        <img src="stop.png" alt="Control de Sonido">
    </button>

    <div id="resultado">¿Cuánto debes pagar?</div>
    <input type="text" id="calculo" placeholder="Ingresa tu cálculo aquí">
    <button class="boton" id="boton-pagar" onclick="verificarPago()">Debe Pagar</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <script>
        let indiceDialogo = 0;
        const dialogos = [
            `Luego de unos instantes, el abogado (Max) te explicó lo básico. En la parte superior izquierda tienes dos botones, uno te abre una lista la cuál tiene los precios de las cosas y el otro una calculadora, arreglate con eso.`
        ];

        function mostrarDialogo() {
            if (indiceDialogo < dialogos.length) {
                const dialogoElemento = document.getElementById('texto-dialogo');
                dialogoElemento.classList.add('texto-visible');
                dialogoElemento.textContent = dialogos[indiceDialogo];
                indiceDialogo++;
                setTimeout(() => {
                    dialogoElemento.classList.remove('texto-visible');
                    setTimeout(() => {
                        if (indiceDialogo >= dialogos.length) {
                            mostrarNPC1();
                        } else {
                            mostrarDialogo();
                        }
                    }, 500);
                }, 3000);
            }
        }

        function mostrarNPC1() {
            const npc1 = document.getElementById('npc1');
            npc1.style.display = 'block';
            setTimeout(() => {
                mostrarTextoNPC1();
            }, 500);
        }

        function mostrarTextoNPC1() {
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Ay Holis!!!! Me dices cuanto sería el jabón y dos refrescos tres chetos y un queso plis?";
            dialogoElemento.classList.add('texto-visible');
            setTimeout(() => {
                dialogoElemento.classList.remove('texto-visible');
                setTimeout(() => {
                    npc1.style.display = 'none';
                    mostrarNPC2();
                }, 2000);
            }, 3000);
        }

        function mostrarNPC2() {
            const npc2 = document.getElementById('npc2');
            npc2.style.display = 'block';
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Dame siete quesos...";
            dialogoElemento.classList.add('texto-visible');
            setTimeout(() => {
                dialogoElemento.classList.remove('texto-visible');
            }, 3000);
        }

        function verificarPago() {
            const input = document.getElementById('calculo').value;
            const resultadoElemento = document.getElementById('resultado');
            const pagoCorrecto = 900 + 800 * 2 + 1700 + 1200;

            if (parseInt(input) === pagoCorrecto) {
                resultadoElemento.textContent = "Ayyy muchas gracias!!!";
            } else if (parseInt(input) > pagoCorrecto) {
                resultadoElemento.textContent = "Oye!!! Esto es una estafa...";
            } else {
                resultadoElemento.textContent = "Oh!!! Una ganga!!!";
            }

            setTimeout(() => {
                mostrarNPC2();
            }, 2000);
        }

        function cambiarVolumen(volumen) {
        }

        function cambiarVolumenEfectos(volumen) {
        }

        function activarPlay() {
        }

        function activarPausa() {
        }

        function activarMenuSonido() {
            const menuSonido = document.getElementById('menu-sonido');
            menuSonido.style.display = menuSonido.style.display === 'none' ? 'block' : 'none';
        }

        function irAIndex() {
            window.location.href = 'index.html';
        }

        function saltarCinematica() {
            mostrarDialogo();
            document.getElementById('pantalla-negra').style.display = 'none';
        }

        window.onload = function () {
            setTimeout(() => {
                document.getElementById('pantalla-negra').style.display = 'none';
                mostrarDialogo();
            }, 4000);
        };
    </script>
</body>
</html>
