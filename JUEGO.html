<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="LOGO 1.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        #abogado, #npc1, #npc2 {
            position: absolute;
            bottom: 20px;
            right: 10%;
            width: 200px;
            display: block;
            transition: transform 0.5s ease, opacity 0.5s ease;
            opacity: 1;
            animation: npcAnimation 1.5s infinite alternate ease-in-out;
        }

        @keyframes npcAnimation {
            0% { transform: translateY(0); }
            100% { transform: translateY(-10px); }
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 1;
        }

        .menu-sonido {
            display: block;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 40px;
            height: 40px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #pantalla-negra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-size: 24px;
            color: white;
        }

        #resultado {
            margin-top: 20px;
            font-size: 24px;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 10px;
        }

        #calculo {
            margin-top: 20px;
            width: 30%;
            padding: 5px;
            font-size: 18px;
        }

        #boton-enviar {
            margin-top: 10px;
            padding: 10px 20px;
        }

        .boton-menu {
            position: absolute;
            top: 10px;
            left: 10px;
        }

        #boton-calculadora, #boton-precios {
            margin: 5px;
        }

        #calculadora {
            display: none;
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            z-index: 10;
        }

        .boton-calculo {
            width: 40px;
            height: 40px;
            font-size: 20px;
            margin: 5px;
        }

        #resultado-calculadora {
            margin-bottom: 10px;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div id="pantalla-negra">Cargando...</div>
    <img src="abogado.png" alt="Abogado" id="abogado">
    <img src="npc1.png" alt="NPC 1" id="npc1">
    <img src="npc2.png" alt="NPC 2" id="npc2">

    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo"></p>
    </div>

    <div id="resultado">¿Cuánto debes pagar?</div>
    <input type="number" id="calculo" placeholder="Ingresa tu cálculo aquí" min="0">
    <button class="boton" id="boton-enviar" onclick="verificarPago()">Enviar</button>

    <div class="boton-menu">
        <button class="boton" id="boton-calculadora" onclick="abrirCalculadora()">
            <img src="calculadora.png" alt="Calculadora">
        </button>
        <button class="boton" id="boton-precios" onclick="abrirPrecios()">
            <img src="nota.png" alt="Precios">
        </button>
    </div>

    <div id="calculadora">
        <div id="resultado-calculadora">0</div>
        <button class="boton-calculo" onclick="agregarNumero(1)">1</button>
        <button class="boton-calculo" onclick="agregarNumero(2)">2</button>
        <button class="boton-calculo" onclick="agregarNumero(3)">3</button>
        <button class="boton-calculo" onclick="agregarNumero(4)">4</button>
        <button class="boton-calculo" onclick="agregarNumero(5)">5</button>
        <br>
        <button class="boton-calculo" onclick="realizarOperacion('+')">+</button>
        <button class="boton-calculo" onclick="realizarOperacion('-')">-</button>
        <button class="boton-calculo" onclick="limpiarCalculadora()">C</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <script>
        let indiceDialogo = 0;
        const dialogos = [
            `Luego de unos instantes, el abogado (Max) te explicó lo básico. En la parte superior izquierda tienes dos botones, uno te abre una lista la cuál tiene los precios de las cosas y el otro una calculadora, arreglate con eso.`
        ];

        function mostrarDialogo() {
            if (indiceDialogo < dialogos.length) {
                const dialogoElemento = document.getElementById('texto-dialogo');
                dialogoElemento.classList.add('texto-visible');
                dialogoElemento.textContent = dialogos[indiceDialogo];
                indiceDialogo++;
                setTimeout(() => {
                    dialogoElemento.classList.remove('texto-visible');
                    setTimeout(mostrarNPC1, 500);
                }, 3000);
            }
        }

        function mostrarNPC1() {
            const npc1 = document.getElementById('npc1');
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Ay Holis!!!! Me dices cuanto sería el jabón y dos refrescos tres chetos y un queso plis?";
        }

        function verificarPago() {
            const input = document.getElementById('calculo').value;
            const resultadoElemento = document.getElementById('resultado');
            const pagoCorrecto = 900 + 800 * 2 + 1700 + 1200;

            if (parseInt(input) === pagoCorrecto) {
                dialogarNPC("Ayyy muchas gracias!!!");
            } else if (parseInt(input) > pagoCorrecto) {
                dialogarNPC("Oye!!! Esto es una estafa...");
            } else {
                dialogarNPC("Oh!!! Una ganga!!!");
            }
        }

        function dialogarNPC(mensaje) {
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = mensaje;
            setTimeout(() => {
                dialogoElemento.textContent = "";
                mostrarNPC2();
            }, 3000);
        }

        function mostrarNPC2() {
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.textContent = "Y ya me puedes decir cuánto es si te llevo siete quesos?";
        }

        function abrirCalculadora() {
            const calculadora = document.getElementById('calculadora');
            calculadora.style.display = 'block';
        }

        function abrirPrecios() {
            window.open('precios.html', '_blank');
        }

        let operacionActual = '';
        let resultadoActual = 0;

        function agregarNumero(numero) {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            if (resultadoElemento.textContent === '0') {
                resultadoElemento.textContent = numero;
            } else {
                resultadoElemento.textContent += numero;
            }
        }

        function realizarOperacion(operacion) {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            resultadoActual = parseInt(resultadoElemento.textContent);
            operacionActual = operacion;
            resultadoElemento.textContent = '0';
        }

        function limpiarCalculadora() {
            document.getElementById('resultado-calculadora').textContent = '0';
            operacionActual = '';
            resultadoActual = 0;
        }

        function finalizarOperacion() {
            const resultadoElemento = document.getElementById('resultado-calculadora');
            const segundoNumero = parseInt(resultadoElemento.textContent);

            if (operacionActual === '+') {
                resultadoActual += segundoNumero;
            } else if (operacionActual === '-') {
                resultadoActual -= segundoNumero;
            }

            resultadoElemento.textContent = resultadoActual;
        }

        window.onload = function() {
            setTimeout(() => {
                document.getElementById('pantalla-negra').style.display = 'none';
                mostrarDialogo();
            }, 8000);
        };
    </script>
</body>
</html>
