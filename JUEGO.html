<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="LOGO 1.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K.T.P (EL JUEGO)</title>
    <style>
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('tienda.jpg');
            background-size: cover;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            overflow: hidden;
        }

        #abogado {
            display: none;
        }

        #npc1, #npc2 {
            position: absolute;
            bottom: 20px;
            left: 10%;
            width: 150px;
            display: none;
            transition: transform 0.5s ease, opacity 0.5s ease;
            opacity: 0;
        }

        #npc2 {
            left: 60%;
        }

        .panel-dialogo {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            display: block;
        }

        .texto-dialogo {
            margin: 0;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .texto-visible {
            opacity: 1;
        }

        .menu-sonido {
            display: block;
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            background-color: rgba(34, 85, 34, 0.8);
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(5px);
        }

        .boton {
            background-color: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            padding: 10px;
            margin: 5px;
            font-size: 16px;
            transition: transform 0.2s, border-color 0.2s;
        }

        .boton img {
            width: 40px;
            height: 40px;
        }

        .boton:hover {
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        #boton-saltar {
            position: absolute;
            bottom: 10px;
            left: 10px;
            padding: 10px 20px;
        }

        #pantalla-negra {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            display: none;
            z-index: 9999;
        }

        #cuadro-total {
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 10px;
            margin: 20px 0;
            display: inline-block;
        }

        .hoja-precios {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            z-index: 10000;
        }

        .calculadora {
            display: none;
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, 0);
            background-color: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            z-index: 10000;
        }
        
        .calculadora input {
            width: 100%;
            margin-bottom: 10px;
            text-align: center;
            font-size: 24px;
            color: black;
        }
    </style>
</head>
<body>
    <div id="pantalla-negra"></div>
    <img src="npc 1.png" alt="NPC 1" id="npc1">
    <img src="npc 2.png" alt="NPC 2" id="npc2">

    <div class="panel-dialogo" id="panel-dialogo">
        <p class="texto-dialogo" id="texto-dialogo">Cargando...</p>
    </div>

    <div class="menu-sonido" id="menu-sonido">
        <p>Menú de Sonido</p>
        <input type="range" min="0" max="100" value="50" class="barra-volumen" id="control-volumen" oninput="cambiarVolumen(this.value)">
        <div>
            <button class="boton" onclick="irAIndex()">
                <img src="salir.png" alt="Salir">
            </button>
            <button class="boton" id="boton-play" onclick="activarPlay()">
                <img src="inicio.png" alt="Iniciar Música">
            </button>
            <button class="boton" id="boton-pausa" onclick="activarPausa()">
                <img src="pausa.png" alt="Pausar Música">
            </button>
        </div>
    </div>

    <button class="boton" id="boton-saltar" onclick="saltarCinematica()">
        <img src="pass.png" alt="Saltar Cinemática">
    </button>

    <div id="cuadro-total">
        <input type="number" id="resultado" placeholder="Ingresa el total">
        <button class="boton" onclick="enviarResultado()">Enviar</button>
    </div>

    <div class="hoja-precios" id="hoja-precios">
        <h2>Precios</h2>
        <p>Jabón = 900</p>
        <p>Chetos = 1700</p>
        <p>Refresco = 800</p>
        <p>Queso = 1200</p>
        <p>Uranio = 11.000</p>
        <button class="boton" onclick="cerrarHojaPrecios()">Cerrar</button>
    </div>

    <div class="calculadora" id="calculadora">
        <input type="text" id="input-calculadora" placeholder="0" disabled>
        <div>
            <button class="boton" onclick="agregarNumero(1)">1</button>
            <button class="boton" onclick="agregarNumero(2)">2</button>
            <button class="boton" onclick="agregarNumero(3)">3</button>
            <button class="boton" onclick="agregarNumero(4)">4</button>
            <button class="boton" onclick="agregarNumero(5)">5</button>
        </div>
        <div>
            <button class="boton" onclick="agregarOperacion('+')">+</button>
            <button class="boton" onclick="agregarOperacion('-')">-</button>
            <button class="boton" onclick="calcularResultado()">=</button>
            <button class="boton" onclick="cerrarCalculadora()">Cerrar</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>
    <script>
        let indiceDialogo = 0;
        const dialogoIntro = [
            `Luego de unos instantes, el abogado (Max) te explicó lo básico. En la parte superior izquierda tienes dos botones, uno te abre una lista la cuál tiene los precios de las cosas y el otro una calculadora, arreglate con eso.`
        ];

        function mostrarDialogoIntro() {
            const dialogoElemento = document.getElementById('texto-dialogo');
            dialogoElemento.classList.add('texto-visible');
            dialogoElemento.textContent = dialogoIntro[0];
            setTimeout(() => {
                dialogoElemento.classList.remove('texto-visible');
                setTimeout(() => {
                    mostrarNPC1();
                }, 500);
            }, 6000);
        }

        function mostrarNPC1() {
            const npc1 = document.getElementById('npc1');
            npc1.style.display = 'block';
            npc1.style.opacity = 1;
            setTimeout(() => {
                npc1.style.transform = 'translateY(0)';
                setTimeout(() => {
                    npc1.style.opacity = 1;
                    setTimeout(() => {
                        npc1.style.opacity = 0;
                        setTimeout(() => {
                            npc1.style.display = 'none';
                            mostrarNPC2();
                        }, 500);
                    }, 2000);
                }, 1000);
            }, 1000);
        }

        function mostrarNPC2() {
            const npc2 = document.getElementById('npc2');
            npc2.style.display = 'block';
            npc2.style.opacity = 1;
            setTimeout(() => {
                npc2.style.transform = 'translateY(0)';
                npc2.style.opacity = 1;
            }, 1000);
        }

        function enviarResultado() {
            const resultadoInput = document.getElementById('resultado').value;
            const textoDialogo = document.getElementById('texto-dialogo');
            const precioCorrecto1 = 900 + (2 * 800) + (3 * 1700) + 1200;
            const precioCorrecto2 = 7 * 1200;

            if (resultadoInput == precioCorrecto1) {
                textoDialogo.textContent = "Ay, muchas gracias!!!";
                textoDialogo.classList.add('texto-visible');
                setTimeout(() => {
                    textoDialogo.classList.remove('texto-visible');
                    mostrarNPC2();
                }, 2000);
            } else if (resultadoInput > precioCorrecto1) {
                textoDialogo.textContent = "Oye!!! Esto es una estafa...";
                textoDialogo.classList.add('texto-visible');
                setTimeout(() => {
                    textoDialogo.classList.remove('texto-visible');
                }, 2000);
            } else {
                textoDialogo.textContent = "Oh!!! Una ganga!!!";
                textoDialogo.classList.add('texto-visible');
                setTimeout(() => {
                    textoDialogo.classList.remove('texto-visible');
                }, 2000);
            }
        }

        function cerrarHojaPrecios() {
            document.getElementById('hoja-precios').style.display = 'none';
        }

        function abrirHojaPrecios() {
            document.getElementById('hoja-precios').style.display = 'block';
        }

        function cerrarCalculadora() {
            document.getElementById('calculadora').style.display = 'none';
        }

        function abrirCalculadora() {
            document.getElementById('calculadora').style.display = 'block';
        }

        function agregarNumero(num) {
            const inputCalculadora = document.getElementById('input-calculadora');
            inputCalculadora.value = inputCalculadora.value === '0' ? num : inputCalculadora.value + num;
        }

        function agregarOperacion(operacion) {
            const inputCalculadora = document.getElementById('input-calculadora');
            inputCalculadora.value += operacion;
        }

        function calcularResultado() {
            const inputCalculadora = document.getElementById('input-calculadora');
            try {
                inputCalculadora.value = eval(inputCalculadora.value);
            } catch (error) {
                inputCalculadora.value = 'Error';
            }
        }

        function cambiarVolumen(valor) {
            Tone.Master.volume.value = valor - 100;
        }

        function activarPlay() {
            Tone.start();
            Tone.Transport.start();
        }

        function activarPausa() {
            Tone.Transport.pause();
        }

        function irAIndex() {
            window.location.href = 'index.html';
        }

        function saltarCinematica() {
            document.getElementById('pantalla-negra').style.display = 'none';
            mostrarDialogoIntro();
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('pantalla-negra').style.display = 'block';
            setTimeout(() => {
                document.getElementById('pantalla-negra').style.display = 'none';
                mostrarDialogoIntro();
            }, 8000);
        });
    </script>
</body>
</html>
